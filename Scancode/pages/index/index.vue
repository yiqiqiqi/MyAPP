<template>
	<view class="home-page">
		<!-- å¯¼èˆªæ  -->
		<view class="navbar">
			<view class="nav-container">
				<view class="nav-logo">
					<text class="logo-text">EEnous</text>
					<text class="logo-subtitle">Technology</text>
				</view>
				<view class="nav-menu">
					<text class="nav-item" @tap="navigateTo('/pages/index/index')">é¦–é¡µ</text>
					<text class="nav-item" @tap="navigateTo('/pages/about/index')">å…³äºæˆ‘ä»¬</text>
					<text class="nav-item" @tap="navigateTo('/pages/business/index')">æ ¸å¿ƒä¸šåŠ¡</text>
					<text class="nav-item" @tap="navigateTo('/pages/contact/index')">è”ç³»æˆ‘ä»¬</text>
				</view>
			</view>
		</view>

		<!-- ä¸»å†…å®¹åŒºåŸŸ -->
		<scroll-view class="main-content" scroll-y>
			<!-- è‹±é›„åŒºåŸŸ -->
			<view class="hero-section">
				<view class="hero-bg"></view>
				<view class="container">
					<view class="hero-content">
						<view class="hero-badge">
							<text class="badge-icon">âš¡</text>
							<text class="badge-text">Technology Innovation</text>
						</view>
						<view class="hero-title">
							<text class="title-line">å—äº¬ç»ä¸ç„ŠèŠ¯</text>
							<text class="title-highlight">ç§‘æŠ€æœ‰é™å…¬å¸</text>
						</view>
						<view class="hero-divider"></view>
						<view class="hero-description">
							æˆ‘ä»¬ä¸“æ³¨äº<span class="text-highlight">å…‰çº¤é€šä¿¡</span>ä¸<span class="text-highlight">å·¥ä¸šç‰©è”ç½‘</span>é¢†åŸŸçš„æŠ€æœ¯åˆ›æ–°ï¼Œ
							è‡´åŠ›äºä¸ºå®¢æˆ·æä¾›é«˜å“è´¨çš„å›½äº§åŒ–è§£å†³æ–¹æ¡ˆ
						</view>
						<view class="hero-actions">
							<button class="primary-btn" @tap="navigateTo('/pages/business/index')">
								<text class="btn-text">äº†è§£ä¸šåŠ¡</text>
							</button>
							<button class="secondary-btn" @tap="navigateTo('/pages/contact/index')">
								<text class="btn-text">è”ç³»æˆ‘ä»¬</text>
							</button>
						</view>
					</view>
					<view class="hero-visual">
						<view class="tech-animation">
							<view class="animation-circle circle-1"></view>
							<view class="animation-circle circle-2"></view>
							<view class="animation-circle circle-3"></view>
							<view class="tech-icon">ğŸ”—</view>
						</view>
					</view>
				</view>
			</view>

			<!-- ä¸šåŠ¡æ¦‚è§ˆ -->
			<view class="business-overview">
				<view class="container">
					<view class="section-header">
						<view class="section-line"></view>
						<text class="section-title">æ ¸å¿ƒä¸šåŠ¡</text>
						<view class="section-line"></view>
					</view>
					<view class="business-grid">
						<view class="business-card" v-for="(item, index) in businessItems" :key="index"
							@tap="navigateTo('/pages/business/index')">
							<view class="card-icon">
								<text>{{ item.icon }}</text>
							</view>
							<text class="card-title">{{ item.title }}</text>
							<text class="card-desc">{{ item.description }}</text>
						</view>
					</view>
				</view>
			</view>

			<!-- æŠ€æœ¯ä¼˜åŠ¿ -->
			<view class="tech-advantages">
				<view class="container">
					<view class="section-header">
						<view class="section-line"></view>
						<text class="section-title">æŠ€æœ¯ä¼˜åŠ¿</text>
						<view class="section-line"></view>
					</view>
					<view class="advantages-content">
						<view class="advantage-item" v-for="(item, index) in advantages" :key="index">
							<view class="advantage-number">
								<text>{{ index + 1 }}</text>
							</view>
							<view class="advantage-text">
								<text class="advantage-title">{{ item.title }}</text>
								<text class="advantage-desc">{{ item.description }}</text>
							</view>
						</view>
					</view>
				</view>
			</view>

			<!-- æˆåŠŸæ¡ˆä¾‹ -->
			<view class="success-cases">
				<view class="container">
					<view class="section-header">
						<view class="section-line"></view>
						<text class="section-title">æˆåŠŸæ¡ˆä¾‹</text>
						<view class="section-line"></view>
					</view>
					<view class="cases-grid">
						<view class="case-card" v-for="(caseItem, index) in successCases" :key="index">
							<view class="case-header">
								<text class="case-industry">{{ caseItem.industry }}</text>
								<text class="case-year">{{ caseItem.year }}</text>
							</view>
							<text class="case-title">{{ caseItem.title }}</text>
							<text class="case-desc">{{ caseItem.description }}</text>
						</view>
					</view>
				</view>
			</view>

			<!-- åº•éƒ¨CTA -->
			<view class="cta-section">
				<view class="container">
					<view class="cta-content">
						<text class="cta-title">å‡†å¤‡å¥½ä¸æˆ‘ä»¬åˆä½œäº†å—ï¼Ÿ</text>
						<text class="cta-desc">è”ç³»æˆ‘ä»¬ï¼Œå…±åŒæ¨åŠ¨å…‰çº¤é€šä¿¡ä¸å·¥ä¸šç‰©è”ç½‘æŠ€æœ¯çš„å‘å±•</text>
						<button class="cta-btn" @tap="navigateTo('/pages/contact/index')">
							<text class="btn-text">ç«‹å³è”ç³»</text>
						</button>
					</view>
				</view>
			</view>
		</scroll-view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				// ç™»å½•ç›¸å…³æ•°æ®
				isLoggedIn: false,
				loginAccount: '', // è¾“å…¥çš„è´¦å·
				loginPassword: '', // è¾“å…¥çš„å¯†ç 
				allowedAccount: 'admin', // æŒ‡å®šè´¦å·
				allowedPassword: '123456', // æŒ‡å®šå¯†ç 

				deviceId: '', // è®¾å¤‡IDï¼ˆæœ€ç»ˆä¼šæ‹¼æ¥ä¸º "æ‰¹å·-è®¾å¤‡ç¼–å·"ï¼‰
				currentProcessIndex: null, // å½“å‰é€‰ä¸­çš„å·¥åºç´¢å¼•
				processNames: [
					"ï¼ˆåº·é¼ï¼‰ç©¿å…‰çº¤åŠæ¨¡ç»„",
					"ï¼ˆåº·é¼ï¼‰å›ºå®šç¯å¤„ç†",
					"ï¼ˆåº·é¼ï¼‰è¿‡ç¨‹æ£€",
					"ï¼ˆåº·é¼ï¼‰æˆå“æ£€",
					"æ¥æ–™æ£€",
					"æ¸…æ´—",
					"å›ºå®šå¤´ç„Šæ¥",
					"æ’æ¥å¤´ç„Šæ¥",
					"æ¥åœ°çº¿ç„Šæ¥",
					"ç”µè·¯æ¿å°èƒ¶",
					"ä¸Šå£³é”è½®å®‰è£…",
					"æ•£çƒ­ç‰‡å®‰è£…",
					"å¯¼ç®¡å®‰è£…",
					"è½¬è½®å®‰è£…",
					"ä¸Šå£³ç»„ä»¶å®‰è£…",
					"æ‰‹æŸ„æ‰‹è½®å®‰è£…",
					"è¿‡ç¨‹æ£€",
					"å®Œå·¥æ£€",
					"å†…åŒ…æ£€",
					"å¤–åŒ…æ£€",
					"æœ€ç»ˆæ£€",
					"å‡ºå‚æ£€"
				],
				processList: Array(22).fill().map(() => ({
					inspector: '', // æ£€æµ‹äººå‘˜
					inspectTime: '', // æ£€æµ‹æ—¶é—´
					image: '',      // æ£€æµ‹å›¾ç‰‡
					inspectResult: '' // æ£€éªŒç»“æœ
				})),
				inspectResultOptions: [
					"åˆæ ¼",
					"ä¸åˆæ ¼",
					"é®å…‰3%å¯é®",
					"è½¯å¤´æ¼å…‰",
					"å‰ç«¯å…‰çº¤æ–­",
					"é€šä½“æ¼å…‰",
					"è½¯å¤´æ¼å…‰é•¿åº¦è¶…5mm"
				],
				exportRequestActive: false,  // å¯¼å‡ºè¯·æ±‚çŠ¶æ€æ ‡å¿—
				showDownloadTip: false  // æ–°å¢ï¼šä¸‹è½½æç¤ºæ ‡å¿—
			}
		},
		computed: {
			currentProcess() {
				return this.currentProcessIndex !== null ? this.processList[this.currentProcessIndex] : null
			}
		},
		onLoad() {
			// ä»æœ¬åœ°å­˜å‚¨è·å–æ‰«æå†å²
			const history = uni.getStorageSync('scanHistory')
			if (history) {
				this.scanHistory = JSON.parse(history)
			}
		},
		methods: {
			// æ£€æŸ¥ç™»å½•è´¦å·å’Œå¯†ç æ˜¯å¦æ­£ç¡®
			checkLogin() {
				if (
					this.loginAccount.trim() === this.allowedAccount &&
					this.loginPassword === this.allowedPassword
				) {
					this.isLoggedIn = true
				} else {
					uni.showToast({
						title: 'è´¦å·æˆ–å¯†ç é”™è¯¯',
						icon: 'none'
					})
				}
			},
			// æ‰«ç åŠŸèƒ½
			scanCode() {
				uni.scanCode({
					success: (res) => {
						// ç›´æ¥å°†æ‰«æç»“æœä½œä¸ºè®¾å¤‡ç¼–å·
						this.deviceId = res.result;
					},
					fail: (err) => {
						uni.showToast({
							title: 'æ‰«ç å¤±è´¥',
							icon: 'none'
						});
					}
				});
			},
			
			// å¤„ç†å·¥åºé€‰æ‹©
			handleProcessChange(e) {
				this.currentProcessIndex = Number(e.detail.value)
			},
			
			// å¤„ç†æ—¥æœŸé€‰æ‹©
			handleDateChange(e) {
				this.processList[this.currentProcessIndex].inspectTime = e.detail.value
			},

			// å¤„ç†å›¾ç‰‡ä¸Šä¼ 
			handleUploadImage() {
				uni.chooseImage({
					count: 1,
					success: (res) => {
						const tempFilePath = res.tempFilePaths[0];
						// æ•è·å½“å‰å·¥åºç´¢å¼•
						const processIndex = this.currentProcessIndex;
						// æå–æ–‡ä»¶æ‰©å±•åï¼Œè‹¥æ²¡æœ‰åˆ™é»˜è®¤ä½¿ç”¨ .jpg
						const dotIndex = tempFilePath.lastIndexOf('.');
						const ext = dotIndex !== -1 ? tempFilePath.substring(dotIndex) : '.jpg';
						uni.showLoading({ title: 'ä¸Šä¼ ä¸­...' });
						// å¯¹è®¾å¤‡ç¼–å·è¿›è¡Œ URL ç¼–ç ï¼Œç¡®ä¿å®‰å…¨
						const validDeviceId = encodeURIComponent(this.deviceId);
						// è¿™é‡Œç›´æ¥ç”¨ç¼–å·ä½œä¸ºå·¥åºæ ‡è¯†ï¼ˆå¯æ ¹æ®éœ€è¦ä¿®æ”¹ä¸ºå®é™…å·¥åºåç§°å¹¶ç¼–ç ï¼‰
						const validProcessName = 'P' + (processIndex + 1);
						// å¯¹æ£€æµ‹äººå‘˜å’Œæ£€æµ‹æ—¶é—´åš URL ç¼–ç 
						const validInspector = encodeURIComponent(this.currentProcess.inspector);
						const validInspectTime = encodeURIComponent(this.currentProcess.inspectTime);
						// æ–°å¢ï¼šå°†æ£€éªŒç»“æœè½¬æ¢ä¸ºè‹±æ–‡ä»£ç ï¼Œé¿å…ä¸­æ–‡å‡ºç°åœ¨æ–‡ä»¶åä¸­
						const inspectResultMapping = {
							"åˆæ ¼": "R1",
							"ä¸åˆæ ¼": "R2",
							"é®å…‰3%å¯é®": "R3",
							"è½¯å¤´æ¼å…‰": "R4",
							"å‰ç«¯å…‰çº¤æ–­": "R5",
							"é€šä½“æ¼å…‰": "R6",
							"è½¯å¤´æ¼å…‰é•¿åº¦è¶…5mm": "R7"
						};
						const validInspectResult = inspectResultMapping[this.currentProcess.inspectResult] || "UNK";
						// å®šä¹‰äº‘ç«¯å­˜å‚¨è·¯å¾„ï¼Œå½¢å¦‚ï¼šupload/è®¾å¤‡ç¼–å·_P1_æµ‹è¯•äººå‘˜_æ£€æµ‹æ—¶é—´_æ£€éªŒç»“æœ_æ—¶é—´æˆ³.ext
						const cloudPath = `upload/${validDeviceId}_${validProcessName}_${validInspector}_${validInspectTime}_${validInspectResult}_${Date.now()}${ext}`;
						uniCloud.uploadFile({
							filePath: tempFilePath,
							cloudPath: cloudPath
						}).then(async uploadRes => {
							if (uploadRes && uploadRes.fileID) {
								// æ–°å¢å›¾ç‰‡ç´¢å¼•è®°å½•
								await uniCloud.callFunction({
									name: 'submit_process',
									data: {
										type: 'IMAGE_INDEX',
										data: {
											deviceId: this.deviceId,
											processName: this.processNames[processIndex],
											fileID: uploadRes.fileID
										}
									}
								})
								
								uniCloud.getTempFileURL({
									fileList: [uploadRes.fileID]
								}).then(tempUrlRes => {
									let tempUrl = tempUrlRes.fileList[0].tempFileURL;
									// æ·»åŠ æ—¶é—´æˆ³å‚æ•°é˜²æ­¢ç¼“å­˜é—®é¢˜
									tempUrl = tempUrl + '?t=' + Date.now();
									// ä»¥å“åº”å¼æ–¹å¼æ›´æ–°å½“å‰å·¥åºå›¾ç‰‡
									this.$set(this.processList, processIndex, {
										...this.processList[processIndex],
										image: tempUrl
									});
									uni.hideLoading();
									uni.showToast({ title: 'ä¸Šä¼ æˆåŠŸ', icon: 'success' });
								}).catch(err => {
									uni.hideLoading();
									uni.showToast({ title: 'è·å–é¢„è§ˆå›¾å¤±è´¥', icon: 'none' });
									console.error(err);
								});
							} else {
								uni.hideLoading();
								uni.showToast({ title: 'å›¾ç‰‡ä¸Šä¼ å¤±è´¥', icon: 'none' });
							}
						}).catch(err => {
							uni.hideLoading();
							uni.showToast({ title: 'å›¾ç‰‡ä¸Šä¼ å¤±è´¥', icon: 'none' });
							console.error(err);
						});
					},
					fail: () => {
						uni.showToast({ title: 'å›¾ç‰‡é€‰æ‹©å¤±è´¥', icon: 'none' });
					}
				});
			},

			// æäº¤è¡¨å•
			async handleSubmit() {
				if (!this.deviceId) {
					uni.showToast({
						title: 'è¯·å…ˆè¾“å…¥æˆ–æ‰«ç è·å–è®¾å¤‡ç¼–å·',
						icon: 'none'
					})
					return
				}
				
				// è¡¨å•éªŒè¯
				if (!this.validateForm()) {
					return
				}

				try {
					uni.showLoading({
						title: 'æäº¤ä¸­...'
					})
					
					const result = await uniCloud.callFunction({
						name: 'submit_process',
						data: {
							deviceId: this.deviceId,
							processName: this.processNames[this.currentProcessIndex],
							processData: {
								inspector: this.currentProcess.inspector,
								inspectTime: this.currentProcess.inspectTime,
								inspectResult: this.currentProcess.inspectResult,
								image: this.currentProcess.image
							}
						}
					})
					
					if(result.result.code === 0) {
						uni.showToast({
							title: 'æäº¤æˆåŠŸ',
							icon: 'success'
						})
						// é‡ç½®å½“å‰å·¥åºæ•°æ®
						this.processList[this.currentProcessIndex] = {
							inspector: '',
							inspectTime: '',
							image: '',  // æ­¤å¤„ä¿ç•™ image å­—æ®µç”¨äºåç»­æ“ä½œï¼ˆå¦‚é‡æ–°ä¸Šä¼ ï¼‰ï¼Œä½†ä¸ä¼šæäº¤
							inspectResult: ''
						}
					} else {
						throw new Error(result.result.msg)
					}
					
				} catch (error) {
					uni.showToast({
						title: error.message || 'æäº¤å¤±è´¥',
						icon: 'none'
					})
					console.error('æäº¤å¤±è´¥ï¼š', error)
				} finally {
					uni.hideLoading()
				}
			},

			// æ–°å¢ï¼šå¯¼å‡ºå…¨éƒ¨æ•°æ®æ–¹æ³•ï¼ˆè°ƒç”¨äº‘å‡½æ•° export_all_excelï¼‰
			async handleExport() {
				this.exportRequestActive = true;  // æ ‡è®°å¼€å§‹å¯¼å‡º
				try {
					uni.showLoading({ title: 'å¯¼å‡ºä¸­...' });
					const res = await uniCloud.callFunction({ name: 'export_all_excel' });
					uni.hideLoading();
					// å¦‚æœåœ¨ç­‰å¾…è¿‡ç¨‹ä¸­ç”¨æˆ·ç‚¹å‡»äº†ç»ˆæ­¢
					if (!this.exportRequestActive) {
						uni.showToast({ title: 'å¯¼å‡ºå·²ç»ˆæ­¢', icon: 'none' });
						return;
					}
					if (res.result && res.result.code === 0) {
						uni.showToast({ title: 'å¯¼å‡ºæˆåŠŸ', icon: 'success' });
						console.log("Excel æ–‡ä»¶é“¾æ¥ï¼š", res.result.data.excelFile);
					} else {
						uni.showToast({ title: 'å¯¼å‡ºå¤±è´¥', icon: 'none' });
					}
				} catch (error) {
					uni.hideLoading();
					if (this.exportRequestActive) {
						uni.showToast({ title: 'å¯¼å‡ºå¤±è´¥', icon: 'none' });
					}
					console.error(error);
				}
				this.exportRequestActive = false; // è¯·æ±‚ç»“æŸ
			},

			// æ–°å¢ï¼šç»ˆæ­¢å¯¼å‡ºæ“ä½œï¼ˆä»…æ§åˆ¶å‰ç«¯çŠ¶æ€ï¼‰
			handleCancelExport() {
				if (this.exportRequestActive) {
					this.exportRequestActive = false;
					uni.hideLoading();
					uni.showToast({ title: 'å·²ç»ˆæ­¢å¯¼å‡º', icon: 'none' });
					console.log('å¯¼å‡ºæ“ä½œå·²ç»ˆæ­¢');
				}
			},
			
			// è¡¨å•éªŒè¯
			validateForm() {
				const process = this.currentProcess;
				if (!process.inspector || !process.inspectTime) {
					uni.showToast({
						title: 'è¯·å®Œå–„å½“å‰å·¥åºä¿¡æ¯',
						icon: 'none'
					});
					return false;
				}
				return true;
			},

			// å¤„ç†æ£€éªŒç»“æœé€‰æ‹©
			handleInspectResultChange(e) {
				const index = Number(e.detail.value);
				this.processList[this.currentProcessIndex].inspectResult = this.inspectResultOptions[index];
			},

			// æ–°å¢ï¼šæ‰¹é‡ä¸‹è½½åŠŸèƒ½
			async handleBatchDownload() {
				if (!this.deviceId) {
					uni.showToast({ title: 'è¯·å…ˆè¾“å…¥è®¾å¤‡ç¼–å·', icon: 'none' });
					return;
				}
				try {
					uni.showLoading({ 
						title: 'æ­£åœ¨ç”Ÿæˆå‹ç¼©åŒ…...',
						mask: true
					});

					// è®¾ç½®è¶…æ—¶ç›‘æ§ï¼ˆ5åˆ†é’Ÿï¼‰
					const timeout = setTimeout(() => {
						uni.showModal({
							title: 'æç¤º',
							content: 'å¤„ç†æ—¶é—´è¾ƒé•¿ï¼Œè¯·å‹¿å…³é—­é¡µé¢',
							showCancel: false
						});
					}, 120000);

					const res = await uniCloud.callFunction({
						name: 'batch_download_images',
						data: { deviceId: this.deviceId }
					});

					if (!res.result.data?.zipUrl) {
						throw new Error('å‹ç¼©åŒ…ç”Ÿæˆå¤±è´¥');
					}

					const tempUrlRes = await uniCloud.getTempFileURL({
						fileList: [res.result.data.zipUrl]
					});
					
					uni.downloadFile({
						url: tempUrlRes.fileList[0].tempFileURL,
						success: (downloadRes) => {
							if (downloadRes.statusCode !== 200) {
								throw new Error(`ä¸‹è½½å¤±è´¥ï¼š${downloadRes.statusCode}`);
							}
							uni.saveFileToDisk({
								filePath: downloadRes.tempFilePath,
								success: () => {
									uni.showModal({
										title: 'ä¸‹è½½å®Œæˆ',
										content: 'å‹ç¼©åŒ…å·²ä¿å­˜è‡³æ‰‹æœºä¸‹è½½ç›®å½•',
										showCancel: false
									});
								},
								fail: (e) => {
									console.error('ä¿å­˜å¤±è´¥:', e);
									uni.showToast({ title: 'ä¿å­˜å¤±è´¥ï¼Œè¯·æ£€æŸ¥å­˜å‚¨æƒé™', icon: 'none' });
								}
							});
						},
						fail: (err) => {
							throw new Error(`ä¸‹è½½å¤±è´¥ï¼š${err.errMsg}`);
						}
					});
				} catch(e) {
					console.error('å¯¼å‡ºé”™è¯¯:', e);
					uni.showToast({ 
						title: `æ“ä½œå¤±è´¥ï¼š${e.message || e.errMsg}`,
						icon: 'none',
						duration: 3000
					});
				} finally {
					clearTimeout(timeout);
					uni.hideLoading();
				}
			},

			openSettingGuide() {
				uni.showModal({
					title: 'æƒé™ç”³è¯·',
					content: 'è¯·åœ¨ç³»ç»Ÿè®¾ç½®ä¸­å…è®¸åº”ç”¨è®¿é—®ç›¸å†Œæƒé™',
					confirmText: 'å»è®¾ç½®',
					success: (res) => {
						if (res.confirm) {
							uni.openSetting();
						}
					}
				});
			},

			// æ–°å¢ï¼šè·³è½¬åå°
			goToAdmin() {
				uni.navigateTo({
					url: '/pages/admin/admin'
				})
			},
		}
	}
</script>

<style lang="scss">
	/* ç¾åŒ–åçš„ç™»å½•ç•Œé¢æ ·å¼ */
	.login-container {
		display: flex;
		justify-content: center;
		align-items: center;
		height: 100vh;
		/* ä½¿ç”¨æ›´æŸ”å’Œçš„æ¸å˜èƒŒæ™¯ */
		background: linear-gradient(135deg, #ffffff, #f0f1f5);
		padding: 20px;
	}
	.login-box {
		display: flex;
		flex-direction: column;
		align-items: center;
		background-color: #fff;
		padding: 40px 30px;
		border-radius: 16px;
		box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
		width: 90%;
		max-width: 350px;
	}
	.login-title {
		font-size: 28px;
		margin-bottom: 25px;
		font-weight: 700;
		color: #333;
	}
	.login-input {
		width: 85%;
		padding: 14px;
		border: 1px solid #e0e0e0;
		border-radius: 10px;
		margin-bottom: 22px;
		font-size: 16px;
		text-align: center;
		transition: border-color 0.3s ease, box-shadow 0.3s ease;
	}
	.login-input:focus {
		border-color: #3a8bcd;
		box-shadow: 0 0 8px rgba(58, 139, 205, 0.3);
		outline: none;
	}
	.login-button {
		width: 85%;
		padding: 14px;
		background-color: #3a8bcd;
		color: #fff;
		border: none;
		border-radius: 10px;
		font-size: 18px;
		font-weight: 700;
		transition: background-color 0.3s ease, transform 0.3s ease;
	}
	.login-button:hover {
		background-color: #3270a8;
		transform: translateY(-2px);
	}

	/* ç¾åŒ–åçš„ä¸»é¡µé¢æ ·å¼ */
	.container {
		padding: 40rpx;
		background-color: #ffffff;
		border-radius: 16rpx;
		box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);
	}
	.container .header {
		margin-bottom: 50rpx;
		text-align: center;
		.title {
			font-size: 42rpx;
			font-weight: 700;
			color: #333;
		}
	}
	
	.container .device-section {
		margin-bottom: 40rpx;
		.device-input-group {
			display: flex;
			align-items: center;
			gap: 20rpx;
			.device-input {
				flex: 1;
				height: 90rpx;
				padding: 0 25rpx;
				background-color: #f9f9f9;
				border: 1rpx solid #e0e0e0;
				border-radius: 10rpx;
				font-size: 30rpx;
				transition: border-color 0.3s ease, background-color 0.3s ease;
				&:focus {
					border-color: #3a8bcd;
				}
			}
			.scan-btn {
				width: 200rpx;
				height: 90rpx;
				line-height: 90rpx;
				font-size: 30rpx;
				background-color: #3a8bcd;
				color: #fff;
				border: none;
				border-radius: 10rpx;
				transition: background-color 0.3s ease, transform 0.3s ease;
				&:hover {
					background-color: #3270a8;
					transform: translateY(-2px);
				}
			}
		}
	}

	.container .process-section {
		margin-bottom: 40rpx;
		.label {
			display: block;
			margin-bottom: 12rpx;
			color: #333;
			font-size: 32rpx;
		}
		.picker-text {
			width: 100%;
			height: 80rpx;
			line-height: 80rpx;
			padding: 0 25rpx;
			background-color: #f9f9f9;
			border: 1rpx solid #e0e0e0;
			border-radius: 10rpx;
			font-size: 30rpx;
			transition: border-color 0.3s ease;
			&:hover {
				border-color: #3a8bcd;
			}
		}
	}

	.container .form-section {
		.form-item {
			margin-bottom: 30rpx;
			.label {
				display: block;
				margin-bottom: 12rpx;
				color: #333;
				font-size: 32rpx;
			}
			.picker-text {
				width: 100%;
				height: 80rpx;
				line-height: 80rpx;
				padding: 0 25rpx;
				background-color: #f9f9f9;
				border: 1rpx solid #e0e0e0;
				border-radius: 10rpx;
				font-size: 30rpx;
				transition: border-color 0.3s ease;
				&:hover {
					border-color: #3a8bcd;
				}
			}
		}
		.image-upload {
			.preview-image {
				width: 240rpx;
				height: 240rpx;
				margin-bottom: 22rpx;
				border-radius: 12rpx;
				object-fit: cover;
			}
			.upload-btn {
				width: 240rpx;
				font-size: 30rpx;
				background-color: #3a8bcd;
				color: #fff;
				border: none;
				border-radius: 12rpx;
				padding: 12rpx;
				transition: background-color 0.3s ease, transform 0.3s ease;
				&:hover {
					background-color: #3270a8;
					transform: translateY(-2px);
				}
			}
		}
		.submit-btn {
			margin-top: 40rpx;
			width: 100%;
			padding: 18rpx;
			background-color: #28a745;
			color: #fff;
			border: none;
			border-radius: 12rpx;
			font-size: 32rpx;
			font-weight: 700;
			transition: background-color 0.3s ease, transform 0.3s ease;
			&:disabled {
				opacity: 0.6;
				background-color: #94d3a2;
			}
			&:hover:not(:disabled) {
				background-color: #239b45;
				transform: translateY(-2px);
			}
		}
	}

	.container .export-section {
		margin-top: 40rpx;
		text-align: center;
		button {
			width: 100%;
			height: 90rpx;
			line-height: 90rpx;
			font-size: 30rpx;
			margin-bottom: 20rpx;
			border: none;
			border-radius: 12rpx;
			transition: background-color 0.3s ease, transform 0.3s ease;
		}
		.export-btn {
			background-color: #3a8bcd;
			color: #fff;
			&:hover {
				background-color: #3270a8;
				transform: translateY(-2px);
			}
		}
		.cancel-export-btn {
			background-color: #e53e3e;
			color: #fff;
			&:hover {
				background-color: #c53030;
				transform: translateY(-2px);
			}
		}
		.admin-btn {
			background-color: #6c5ce7;
			color: #fff;
			&:hover {
				background-color: #5b4bc4;
			}
		}
	}

	.download-tip {
		padding: 20rpx;
		background-color: #fff3cd;
		border-radius: 8rpx;
		margin: 20rpx 0;
		color: #856404;
		font-size: 24rpx;
	}
</style>
