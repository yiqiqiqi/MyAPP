(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/device-form/index"],{"17f5":function(e,t,n){"use strict";n.r(t);var o=n("f594"),i=n.n(o);for(var c in o)["default"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(c);t["default"]=i.a},1835:function(e,t,n){"use strict";n.r(t);var o=n("7cbd"),i=n("17f5");for(var c in i)["default"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(c);n("ad70");var s=n("828b"),a=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=a.exports},"7cbd":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c},i=[]},ad70:function(e,t,n){"use strict";var o=n("c2bb"),i=n.n(o);i.a},c2bb:function(e,t,n){},e45f:function(e,t,n){"use strict";(function(e,t){var o=n("47a9");n("1872"),n("861b");o(n("3240"));var i=o(n("1835"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},f594:function(e,t,n){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{deviceId:"",processNames:["来料检","过程检","插接头焊接","固定头焊接","导管安装","接地线焊接","转轮安装","上壳组件安装","手柄手轮安装","内包","完工检","出厂检"],currentProcessIndex:0,processList:Array(12).fill().map((function(){return{inspector:"",inspectTime:"",image:""}}))}},computed:{currentProcess:function(){return this.processList[this.currentProcessIndex]}},onLoad:function(e){e.deviceId&&(this.deviceId=e.deviceId)},methods:{handleProcessChange:function(e){this.currentProcessIndex=Number(e.detail.value)},handleDateChange:function(e){this.currentProcess.inspectTime=e.detail.value},handleUploadImage:function(){var t=this;e.chooseImage({count:1,success:function(o){var i=o.tempFilePaths[0],c=t.currentProcessIndex,s=i.lastIndexOf("."),a=-1!==s?i.substring(s):".jpg";e.showLoading({title:"上传中..."});var r="upload/".concat(t.deviceId,"_").concat(t.processNames[c],"_").concat(Date.now()).concat(a);n.uploadFile({filePath:i,cloudPath:r}).then((function(o){o&&o.fileID?n.getTempFileURL({fileList:[o.fileID]}).then((function(n){var o=n.fileList[0].tempFileURL;t.processList[c].image=o,e.hideLoading(),e.showToast({title:"上传成功",icon:"success"})})).catch((function(t){e.hideLoading(),e.showToast({title:"获取预览图失败",icon:"none"}),console.error(t)})):(e.hideLoading(),e.showToast({title:"图片上传失败",icon:"none"}))})).catch((function(t){e.hideLoading(),e.showToast({title:"图片上传失败",icon:"none"}),console.error(t)}))},fail:function(){e.showToast({title:"图片选择失败",icon:"none"})}})},handleSubmit:function(){this.validateForm()&&(console.log("表单数据：",this.currentProcess),e.showToast({title:"提交成功",icon:"success"}))},validateForm:function(){var t=this.currentProcess;return!(!t.inspector||!t.inspectTime)||(e.showToast({title:"请完善当前工序信息",icon:"none"}),!1)}}};t.default=o}).call(this,n("df3c")["default"],n("861b")["uniCloud"])}},[["e45f","common/runtime","common/vendor"]]]);